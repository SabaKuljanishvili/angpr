<div class="train-booking-container">
  <h1>Train Ticket Booking</h1>

  <!-- Step 1: Select stations and date -->
  <div class="search-form">
    <div class="form-group">
      <label>From:</label>
      <select [(ngModel)]="from">
        <option *ngFor="let station of stations" [value]="station">{{ station }}</option>
      </select>
    </div>
    <div class="form-group">
      <label>To:</label>
      <select [(ngModel)]="to">
        <option *ngFor="let station of stations" [value]="station">{{ station }}</option>
      </select>
    </div>
    <div class="form-group">
      <label>Date:</label>
      <input type="date" [(ngModel)]="date" />
    </div>
    <button (click)="searchDepartures()">Search</button>
  </div>

  <!-- Step 2: Select train -->
  <div *ngIf="trains.length > 0">
    <h2>Available Trains</h2>
    <div *ngFor="let train of trains">
      <button (click)="selectTrain(train)">
        Train {{ train.number }}: {{ train.departure }} - {{ train.arrive }} ({{ train.date }})
      </button>
    </div>
  </div>

  <!-- Step 3: Select vagon -->
  <div *ngIf="filteredVagons.length > 0">
    <h2>Available Classes</h2>
    <div *ngFor="let vagon of filteredVagons">
      <button (click)="selectVagon(vagon)">
        Class: {{ vagon.class }}
      </button>
    </div>
  </div>

  <!-- Step 4: Select seats -->
  <div *ngIf="selectedVagon">
    <h2>Available Seats</h2>
    <div>
      <button
        *ngFor="let seat of selectedVagon.seats"
        [disabled]="!seat.isAvailable"
        [class.selected]="selectedSeats.includes(seat)"
        (click)="toggleSeatSelection(seat)"
      >
        Seat {{ seat.number }} - Price: {{ seat.price }}â‚¾
      </button>
    </div>
  </div>

  <!-- Step 5: Enter passenger details -->
  <div *ngIf="selectedSeats.length > 0">
    <h2>Passenger Details</h2>
    <div>
      <label>Email:</label>
      <input type="email" [(ngModel)]="email" />
    </div>
    <div>
      <label>Phone Number:</label>
      <input type="text" [(ngModel)]="phoneNumber" />
    </div>
    <button (click)="registerTicket()">Book Ticket</button>
  </div>
</div>